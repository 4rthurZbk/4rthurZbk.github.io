<!DOCTYPE html>
<html lang="eng">
  <head>
    <meta charset="utf-8">
	<title>Zikr</title>
	<link rel="stylesheet" href="zirk_4_chess.css">
	<!-- <script src="js/chess_scripts.js"></script> -->
	
	<link rel="apple-touch-icon" sizes="180x180" href="icon/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="icon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="icon/favicon-16x16.png">
	<link rel="manifest" href="icon/site.webmanifest">
	<link rel="mask-icon" href="icon/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#da532c">
	<meta name="theme-color" content="#ffffff">  
  </head>


  <body>
	<div class = "header2">
		<a href="index.html" class="pages">Home</a>
		<p class = "pages">Chess by 4EPEHKOB</p>
	</div>

	<p onclick = "Alert()">Hello world!</p>
	<input type = "button" onclick = "Allert()" value = "Display">
	
	<table>
		<tr>
			<th>x</th>
			<th>1</th>
			<th>2</th>
			<th>3</th>
			<th>4</th>
			<th>5</th>
			<th>6</th>
			<th>7</th>
			<th>8</th>
		</tr>
		
		<tr>
			<th class = "table_colums">a</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 0 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">
																			<img class = 'field' f_i = 1 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 2 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">
																			<img class = 'field' f_i = 3 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 4 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">
																			<img class = 'field' f_i = 5 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 6 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">
																			<img class = 'field' f_i = 7 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
		</tr>
		
		<tr>
			<th class = "table_colums">b</th>
			<th class = "table_colums" style = "background-color: #dddddd">
																			<img class = 'field' f_i = 8 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 9 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums" style = "background-color: #dddddd">
																			<img class = 'field' f_i = 10 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 11 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums" style = "background-color: #dddddd">
																			<img class = 'field' f_i = 12 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 13 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums" style = "background-color: #dddddd">
																			<img class = 'field' f_i = 14 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 15 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
		</tr>
		
		<tr>
			<th class = "table_colums">c</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 16 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">
																			<img class = 'field' f_i = 17 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 18 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">                             
																			<img class = 'field' f_i = 19 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 20 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">                             
																			<img class = 'field' f_i = 21 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 22 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">                             
																			<img class = 'field' f_i = 23 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
		</tr>
		
		<tr>
			<th class = "table_colums">d</th>
			<th class = "table_colums" style = "background-color: #dddddd">
																			<img class = 'field' f_i = 24 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 25 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums" style = "background-color: #dddddd">
																			<img class = 'field' f_i = 26 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 27 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums" style = "background-color: #dddddd">
																			<img class = 'field' f_i = 28 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 29 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums" style = "background-color: #dddddd">
																			<img class = 'field' f_i = 30 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 31 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
		</tr>
		
		<tr>
			<th class = "table_colums">e</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 32 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">
																			<img class = 'field' f_i = 33 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 34 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">                             
																			<img class = 'field' f_i = 35 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 36 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">                             
																			<img class = 'field' f_i = 37 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 38 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">                             
																			<img class = 'field' f_i = 39 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
		</tr>
		
		<tr>
			<th class = "table_colums">f</th>
			<th class = "table_colums" style = "background-color: #dddddd">
																			<img class = 'field' f_i = 40 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 41 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums" style = "background-color: #dddddd">                            
																			<img class = 'field' f_i = 42 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 43 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums" style = "background-color: #dddddd">                            
																			<img class = 'field' f_i = 44 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 45 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums" style = "background-color: #dddddd">                            
																			<img class = 'field' f_i = 46 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 47 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
		</tr>
		
		<tr>
			<th class = "table_colums">g</th>
			<th class = "table_colums">
																			<img class = 'field' f_i = 48 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">
																			<img class = 'field' f_i = 49 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 50 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">                             
																			<img class = 'field' f_i = 51 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 52 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">                             
																			<img class = 'field' f_i = 53 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 54 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums"style = "background-color: #dddddd">                             
																			<img class = 'field' f_i = 55 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
		</tr>
		
		<tr>
			<th class = "table_colums">h</th>
			<th class = "table_colums" style = "background-color: #dddddd">
																			<img class = 'field' f_i = 56 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 57 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums" style = "background-color: #dddddd">                            
																			<img class = 'field' f_i = 58 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 59 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums" style = "background-color: #dddddd">                            
																			<img class = 'field' f_i = 60 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 61 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums" style = "background-color: #dddddd">                            
																			<img class = 'field' f_i = 62 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
			<th class = "table_colums">                                                                
																			<img class = 'field' f_i = 63 src = "chess_pieces/cp2.png" width="100px" height = "100px">	</th>
		</tr>
		
		<!--  1 = white prawn
			  2 = black prawn
			  3 = white rook
			  4 = black rook
			  5 = white horse
			  6 = black horse
			  7 = white elefant
			  8 = black elefant
			  9 = white quin
			  10 = black quin
			  11 = white king
			  12 = black king
		-->
		
		<script>
			var sasha = [
							4, 6, 8, 10, 12, 8, 6, 4,
							2, 2, 2, 2, 2, 2, 2, 2,
							0, 0, 0, 0, 0, 0, 0, 0,
							0, 0, 0, 0, 0, 0, 0, 0,
							0, 0, 2, 3, 0, 0, 0, 0,
							0, 0, 0, 0, 1, 5, 0, 0,
							1, 1, 1, 1, 1, 1, 1, 1,
							3, 5, 7, 9, 11, 7, 5, 3
						  ];
			
			var cfi = -1;			//current field id
			var a = 0;
			
			
			//console.log(sasha);
			function Allert(){
			alert(sasha);
			}
			var get_field_id = function() {
				document.onclick = function(e) {
					if (e.target.className == "field") {
						var field_id = e.target.getAttribute("f_i");
						//alert('oyash');
						console.log(field_id);
						if (cfi == -1){
							console.log('if');
							cfi = field_id;
						}
						else if (cfi == field_id){
							cfi = -1;
						}
						else{
							if (sasha[cfi] != 0){
								//console.log('else');
								//
								//console.log(cfi);
								//console.log(field_id);
								//
								//console.log(sasha[cfi]);
								//console.log(sasha[field_id]);
								
								if (sasha[cfi]%2 - sasha[field_id]%2 != 0 || sasha[field_id] == 0){
								
									//white prawn
									if (sasha[cfi] == 1 && cfi>47 && cfi-field_id == 16 && sasha[field_id] == 0 && sasha[cfi-8] == 0){
										change_position(field_id, cfi);
									}
									else if(sasha[cfi] == 1 && cfi-field_id == 8 && sasha[field_id] == 0){
										change_position(field_id, cfi);
									}
									else if(sasha[cfi] == 1 && (cfi-field_id == 7 || cfi-field_id == 9) && sasha[field_id] != 0 && sasha[field_id]%2 == 0){
										change_position(field_id, cfi);
									}
									
									//black prawn
									else if (sasha[cfi] == 2 && cfi<16 && field_id-cfi == 16 && sasha[field_id] == 0 && sasha[parseInt(cfi)+8] == 0){
										change_position(field_id, cfi);
									}
									else if(sasha[cfi] == 2 && field_id-cfi == 8 && sasha[field_id] == 0){
										change_position(field_id, cfi);
									}
									else if(sasha[cfi] == 2 && (field_id-cfi == 7 || field_id-cfi == 9) && sasha[field_id] != 0 && sasha[field_id]%2 == 1){
										change_position(field_id, cfi);
									}
									
									//white rook
									else if (sasha[cfi] == 3 && (sasha[field_id]%2 == 0 || sasha[field_id] == 0) && cfi%8 == field_id%8){
										if (field_id < cfi){
											console.log('1111111');
											var check_1 = (cfi - field_id)%8;
											var check_2 = 0;
											console.log(field_id);
											console.log(cfi);
											console.log('1111111');
											for (var i = field_id; i > cfi; i += 8){
												if(sasha[i] != 0){
													check_2 ++;
												}
											}
											console.log(check_1);
											console.log(check_2);
											if (check_1 == check_2){
												change_position(field_id, cfi);
											}
										}
										
										//if (field_id > cfi){
										//	var check_1 = (field_id - cfi)%8
										//	var check_2 = 0
										//	for (var i = cfi; i < field_id; i += 8){
										//		if(sasha[i] != 0){
										//			check_2 ++
										//		}
										//	}	
										//	if (check_1 == check_2){
										//		change_position(field_id, cfi);
										//	}
										//}
									}
									//else if (sasha[cfi] == 3 && (sasha[field_id]%2 == 0 || sasha[field_id] == 0) && ~~(cfi/8) == ~~(field_id/8)){
									//	change_position(field_id, cfi);
									//}
									
									else{
										console.log('else');
										//console.log('sasha[cfi]: '+sasha[cfi]);
										//console.log('cfi: '+cfi);
										//console.log('field_id: '+field_id);
										//console.log('field_id-cfi:',field_id-cfi);
										//console.log('sasha[field_id]: '+sasha[field_id]);
										//console.log('sasha[cfi+8]:',sasha[parseInt(cfi)+8]);
										//console.log('sasha[cfi]-sasha[field_id]:',sasha[cfi]-sasha[field_id]);
									}
									
									
								}
								else{
									console.log('oooooooooooo');
								}
								cfi = -1;
								//console.log(sasha);
							}
							else{
							cfi = field_id;
							}
						}
						board_update();
					}
				}
			}
			
			function board_update(){
				//alert('update')
				var all_fields = document.getElementsByClassName("field");
				console.log(all_fields);
				for (const item of all_fields){
					//console.log(item.getAttribute('f_i'));
					var i_f_i = item.getAttribute('f_i');				//Item Field ID
					if (sasha[i_f_i] == 0){
						item.src = "chess_pieces/cp0.png";
					}
					else{
						item.src = "chess_pieces/cp"+String(sasha[i_f_i])+".png";
					}
					//console.log(item.getAttribute('src'));
				}
			}
			
			function change_position(field_id, cfi){
				sasha[field_id] = sasha[cfi];
				console.log(sasha);
				sasha[cfi] = 0;
				cfi = -1;
			}
			
			get_field_id();
			board_update();
		</script>
		
  </body>